<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KKday ç¦å²¡ä¸€æ—¥éŠè¡Œç¨‹å¤§æ¯”æ‹¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff;
        }
        .card-highlight {
            ring: 4px;
            ring-opacity: 0.8;
            transform: scale(1.02);
            transition: all 0.3s ease;
        }
        
        /* Advanced Table Badges */
        .badge { display: inline-flex; align-items: center; padding: 0.125rem 0.5rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 500; white-space: nowrap; }
        .badge-green { background-color: #dcfce7; color: #166534; }
        .badge-yellow { background-color: #fef9c3; color: #854d0e; }
        .badge-red { background-color: #fee2e2; color: #991b1b; }
        .badge-blue { background-color: #dbeafe; color: #1e40af; }
        .badge-indigo { background-color: #e0e7ff; color: #3730a3; }
        .badge-pink { background-color: #fce7f3; color: #9d174d; }
        .badge-purple { background-color: #f3e8ff; color: #6b21a8; }
        
        /* Table Optimization */
        .detail-row td { vertical-align: top; padding-top: 1rem; padding-bottom: 1rem; }
        
        /* Mobile Card Interaction */
        .mobile-card { transition: all 0.2s; }
        .mobile-card:active { transform: scale(0.98); }

        /* Poll Styles */
        .poll-bar-container { background-color: #e5e7eb; border-radius: 9999px; overflow: hidden; height: 1.5rem; position: relative; }
        .poll-bar { height: 100%; transition: width 1s ease-in-out; display: flex; align-items: center; justify-content: flex-end; padding-right: 0.5rem; color: white; font-size: 0.75rem; font-weight: bold; }
        .vote-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
    <script>
        function toggleDetail(id) {
            const detail = document.getElementById('detail-' + id);
            const icon = document.getElementById('icon-' + id);
            if (detail.classList.contains('hidden')) {
                detail.classList.remove('hidden');
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                detail.classList.add('hidden');
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }
    </script>
</head>
<body class="text-gray-800">

    <!-- Navbar -->
    <nav class="bg-teal-600 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <i class="fas fa-mountain text-2xl mr-2 text-yellow-300"></i>
                    <span class="font-bold text-xl">ä¹å·ä¸€æ—¥éŠæ”»ç•¥ (KKdayç‰ˆ)</span>
                </div>
                <div class="text-sm hidden sm:block">ç²¾é¸ç†±é–€è¡Œç¨‹</div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="bg-teal-700 text-white py-12 px-4 text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">é˜¿è˜‡ã€é«˜åƒç©—ã€ç†Šæœ¬ã€å°ç«è»Šæ€éº¼é¸ï¼Ÿ</h1>
        <p class="text-teal-100 max-w-2xl mx-auto text-lg">
            KKday 7 æ¬¾ç†±éŠ·è¡Œç¨‹æ·±åº¦è§£æï¼Œæ–°å¢ã€Œå¤©ç©ºå°ç«è»Šã€è·¯ç·šï¼Œå¹«æ‚¨æ‰¾åˆ°æœ€é©åˆçš„ä¹å·ç©æ³•ã€‚
        </p>

        <!-- Interactive Filter -->
        <div class="mt-8 bg-white/10 backdrop-blur-md p-6 rounded-xl max-w-5xl mx-auto border border-white/20">
            <h3 class="text-lg font-bold mb-4"><i class="fas fa-magic mr-2"></i>æ‚¨æœ€åœ¨æ„ä»€éº¼ï¼Ÿ(é»æ“Šå¹«æ‚¨æ¨è–¦)</h3>
            <div class="flex flex-wrap justify-center gap-3" id="filters">
                <button onclick="highlight('price')" class="filter-btn px-4 py-2 bg-white text-teal-700 rounded-full font-bold hover:bg-orange-400 hover:text-white transition shadow">
                    <i class="fas fa-dollar-sign mr-1"></i> CPå€¼æœ€é«˜
                </button>
                <button onclick="highlight('food')" class="filter-btn px-4 py-2 bg-white text-teal-700 rounded-full font-bold hover:bg-yellow-400 hover:text-gray-900 transition shadow">
                    <i class="fas fa-utensils mr-1"></i> å¿…åƒé«˜ç´šå’Œç‰›
                </button>
                <button onclick="highlight('boat')" class="filter-btn px-4 py-2 bg-white text-teal-700 rounded-full font-bold hover:bg-blue-400 hover:text-white transition shadow">
                    <i class="fas fa-ship mr-1"></i> ä¸€å®šè¦åˆ’èˆ¹
                </button>
                <button onclick="highlight('train')" class="filter-btn px-4 py-2 bg-white text-teal-700 rounded-full font-bold hover:bg-indigo-500 hover:text-white transition shadow">
                    <i class="fas fa-train mr-1"></i> éµé“/å°ç«è»Š
                </button>
                <button onclick="highlight('onsen')" class="filter-btn px-4 py-2 bg-white text-teal-700 rounded-full font-bold hover:bg-green-500 hover:text-white transition shadow">
                    <i class="fas fa-hot-tub mr-1"></i> é»‘å·æº«æ³‰
                </button>
                <button onclick="highlight('anime')" class="filter-btn px-4 py-2 bg-white text-teal-700 rounded-full font-bold hover:bg-purple-500 hover:text-white transition shadow">
                    <i class="fas fa-torii-gate mr-1"></i> è¢ç«ä¹‹æ£®/ç¥è©±
                </button>
                <button onclick="resetHighlight()" class="px-4 py-2 bg-gray-700 text-white rounded-full font-bold hover:bg-gray-600 transition shadow">
                    é¡¯ç¤ºå…¨éƒ¨
                </button>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- SECTION 0: Voting Poll (Named + Fallback Mode) -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-12 border border-gray-100">
            <div class="bg-gradient-to-r from-pink-500 to-orange-400 p-4 text-white flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center">
                    <!-- Added ID here for robust selection -->
                    <h2 id="poll-title" class="text-xl font-bold"><i class="fas fa-poll mr-2"></i>å¤§å®¶æœ€æƒ³å»å“ªè£¡ï¼Ÿ</h2>
                    <span class="ml-2 text-sm bg-white/20 px-3 py-1 rounded-full">ç´¯ç© <span id="total-votes">0</span> ç¥¨</span>
                </div>
                <!-- Name Input -->
                <div class="flex items-center w-full md:w-auto">
                    <div class="relative w-full">
                        <i class="fas fa-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input type="text" id="voter-name" placeholder="è«‹è¼¸å…¥æ‚¨çš„æš±ç¨± (è¨˜åæŠ•ç¥¨)" 
                            class="pl-10 pr-4 py-2 rounded-full text-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white/50 w-full md:w-64 border-none shadow-inner bg-white/90">
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-gray-100">
                <!-- Poll Bars -->
                <div class="p-6 md:col-span-2" id="poll-container">
                    <!-- Default Initial State -->
                    <div class="text-center text-gray-500 py-8 flex flex-col items-center justify-center">
                        <i class="fas fa-circle-notch fa-spin text-2xl mb-2 text-teal-500"></i>
                        <span>åˆå§‹åŒ–æŠ•ç¥¨é¸é …ä¸­...</span>
                    </div>
                </div>
                
                <!-- Recent Logs -->
                <div class="p-6 bg-gray-50/50">
                    <h3 class="text-sm font-bold text-gray-500 uppercase mb-3"><i class="fas fa-history mr-1"></i> æœ€æ–°æŠ•ç¥¨å‹•æ…‹</h3>
                    <div id="poll-logs" class="space-y-3 text-sm">
                        <div class="text-center text-gray-400 py-4">æš«ç„¡ç´€éŒ„</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SECTION 1: å¡ç‰‡ç‰† (å¿«é€Ÿç€è¦½) -->
        <div class="flex items-center mb-6">
            <div class="h-8 w-2 bg-teal-500 rounded-full mr-3"></div>
            <h2 class="text-2xl font-bold text-gray-800">ç†±é–€è¡Œç¨‹å¡ç‰‡é è¦½</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 mb-16" id="card-container">
            
            <!-- 1. Food (287625) -->
            <div id="card-food" class="tour-card bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col border border-gray-100 ring-yellow-400">
                <div class="bg-yellow-500 text-white text-xs font-bold px-3 py-1 uppercase tracking-wide text-center">
                    é ‚ç´šäº«å— â€¢ ç¾é£Ÿé¦–é¸
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <div class="flex justify-between items-start mb-2"><span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold">287625</span></div>
                    <div class="mb-3"><span class="text-2xl font-bold text-gray-800">NT$ 3,500</span> <span class="text-xs text-gray-500">èµ·</span></div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">å’Œç‰›åˆé¤ï¼†ä¿è­‰åˆ’èˆ¹</h3>
                    <div class="space-y-2 mb-6 flex-1 text-sm text-gray-700">
                        <div><i class="fas fa-check-circle text-green-500 w-5"></i> é˜¿è˜‡ç«å±±/è‰åƒé‡Œ</div>
                        <div class="font-bold bg-yellow-50 p-1 rounded"><i class="fas fa-check-circle text-green-500 w-5"></i> é«˜åƒç©— (ä¿è­‰èˆ¹ä½)</div>
                        <div class="font-bold bg-yellow-50 p-1 rounded"><i class="fas fa-check-circle text-green-500 w-5"></i> é«˜ç´šå’Œç‰›åˆé¤</div>
                    </div>
                    <a href="https://www.kkday.com/zh-tw/product/287625" target="_blank" class="block w-full text-center bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg">å‰å¾€è¨‚è³¼</a>
                </div>
            </div>

            <!-- 7. Deep Takachiho (181723) - NEW! -->
            <div id="card-deep" class="tour-card bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col border border-gray-100 ring-purple-500">
                <div class="bg-purple-600 text-white text-xs font-bold px-3 py-1 uppercase tracking-wide text-center">
                    æ·±åº¦ç¥è©± â€¢ å¤©ç©ºå°ç«è»Š
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <div class="flex justify-between items-start mb-2"><span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold">181723</span></div>
                    <div class="mb-3"><span class="text-2xl font-bold text-teal-600">NT$ 1,600</span> <span class="text-xs text-gray-500">èµ·</span></div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">é«˜åƒç©—æ·±åº¦ï¼†å°ç«è»Š</h3>
                    <div class="space-y-2 mb-6 flex-1 text-sm text-gray-700">
                        <div class="font-bold bg-purple-50 p-1 rounded"><i class="fas fa-train text-purple-600 w-5"></i> å¤©ç©ºå°ç«è»Š (é¸è³¼)</div>
                        <div class="font-bold bg-purple-50 p-1 rounded"><i class="fas fa-torii-gate text-purple-600 w-5"></i> å¤©å²©æˆ¶ç¥ç¤¾ (æ·±åº¦)</div>
                        <div class="text-gray-400"><i class="fas fa-times-circle text-gray-300 w-5"></i> ä¸å»é˜¿è˜‡ç«å±±</div>
                    </div>
                    <a href="https://www.kkday.com/zh-tw/product/181723" target="_blank" class="block w-full text-center bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg">å‰å¾€è¨‚è³¼</a>
                </div>
            </div>

            <!-- 2. Onsen (150994) -->
            <div id="card-onsen" class="tour-card bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col border border-gray-100 ring-green-500">
                <div class="bg-green-600 text-white text-xs font-bold px-3 py-1 uppercase tracking-wide text-center">
                    æº«æ³‰ç¥ç¤¾ â€¢ ç™‚ç™’é¦–é¸
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <div class="flex justify-between items-start mb-2"><span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold">150994</span></div>
                    <div class="mb-3"><span class="text-2xl font-bold text-teal-600">NT$ 1,900</span> <span class="text-xs text-gray-500">èµ·</span></div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">é»‘å·æº«æ³‰ï¼†ç§˜å¢ƒç¥ç¤¾</h3>
                    <div class="space-y-2 mb-6 flex-1 text-sm text-gray-700">
                        <div><i class="fas fa-check-circle text-green-500 w-5"></i> é˜¿è˜‡ç«å±±/è‰åƒé‡Œ</div>
                        <div class="font-bold bg-green-50 p-1 rounded"><i class="fas fa-check-circle text-green-500 w-5"></i> é»‘å·æº«æ³‰ (æ•£ç­–)</div>
                        <div class="font-bold bg-green-50 p-1 rounded"><i class="fas fa-check-circle text-green-500 w-5"></i> ä¸Šè‰²è¦‹ç†Šé‡åº§ç¥ç¤¾</div>
                    </div>
                    <a href="https://www.kkday.com/zh-tw/product/150994" target="_blank" class="block w-full text-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg">å‰å¾€è¨‚è³¼</a>
                </div>
            </div>

            <!-- 3. Classic (266452) -->
            <div id="card-classic" class="tour-card bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col border border-gray-100 ring-blue-500">
                <div class="bg-blue-500 text-white text-xs font-bold px-3 py-1 uppercase tracking-wide text-center">
                    ç¶“å…¸è§€å…‰ â€¢ å°è³‡é¦–é¸
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <div class="flex justify-between items-start mb-2"><span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold">266452</span></div>
                    <div class="mb-3"><span class="text-2xl font-bold text-teal-600">NT$ 1,800</span> <span class="text-xs text-gray-500">èµ·</span></div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">é«˜åƒç©—ï¼†é˜¿è˜‡ç¶“å…¸ç‰ˆ</h3>
                    <div class="space-y-2 mb-6 flex-1 text-sm text-gray-700">
                        <div><i class="fas fa-check-circle text-green-500 w-5"></i> é˜¿è˜‡ç«å±±/è‰åƒé‡Œ</div>
                        <div class="font-bold bg-blue-50 p-1 rounded"><i class="fas fa-check-circle text-green-500 w-5"></i> é«˜åƒç©—å³½ (é‡é»)</div>
                        <div class="text-gray-500"><i class="fas fa-exclamation-circle text-yellow-500 w-5"></i> åˆ’èˆ¹ (éœ€è¦–ç¾å ´ç‹€æ³)</div>
                    </div>
                    <a href="https://www.kkday.com/zh-tw/product/266452" target="_blank" class="block w-full text-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">å‰å¾€è¨‚è³¼</a>
                </div>
            </div>

            <!-- 4. All-in-one (285420) -->
            <div id="card-all" class="tour-card bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col border border-gray-100 ring-red-500">
                <div class="bg-red-500 text-white text-xs font-bold px-3 py-1 uppercase tracking-wide text-center">
                    å…¨è¦½è¡Œç¨‹ â€¢ é«”åŠ›æŒ‘æˆ°
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <div class="flex justify-between items-start mb-2"><span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold">285420</span></div>
                    <div class="mb-3"><span class="text-2xl font-bold text-teal-600">NT$ 1,800</span> <span class="text-xs text-gray-500">èµ·</span></div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">ä¸‰å¤§æ™¯é»å…¨åŒ…ç‰ˆ</h3>
                    <div class="space-y-2 mb-6 flex-1 text-sm text-gray-700">
                        <div><i class="fas fa-check-circle text-green-500 w-5"></i> é˜¿è˜‡ç«å±± (çŸ­æš«)</div>
                        <div><i class="fas fa-check-circle text-green-500 w-5"></i> é«˜åƒç©—å³½ (çŸ­æš«)</div>
                        <div class="font-bold bg-red-50 p-1 rounded"><i class="fas fa-check-circle text-green-500 w-5"></i> ä¸Šè‰²è¦‹ç†Šé‡åº§ç¥ç¤¾</div>
                    </div>
                    <a href="https://www.kkday.com/zh-tw/product/285420" target="_blank" class="block w-full text-center bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg">å‰å¾€è¨‚è³¼</a>
                </div>
            </div>

             <!-- 5. Train (248950) -->
             <div id="card-train" class="tour-card bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col border border-gray-100 ring-indigo-500">
                <div class="bg-indigo-600 text-white text-xs font-bold px-3 py-1 uppercase tracking-wide text-center">
                    æ­·å²ååŸ â€¢ éµé“é«”é©—
                </div>
                <div class="p-6 flex-1 flex flex-col">
                    <div class="flex justify-between items-start mb-2"><span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-mono font-bold">248950</span></div>
                    <div class="mb-3"><span class="text-2xl font-bold text-teal-600">NT$ 2,500</span> <span class="text-xs text-gray-500">èµ·</span></div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">ç†Šæœ¬åŸï¼†é˜¿è˜‡ç”·å­©è™Ÿ</h3>
                    <div class="space-y-2 mb-6 flex-1 text-sm text-gray-700">
                        <div class="font-bold bg-indigo-50 p-1 rounded"><i class="fas fa-train text-indigo-500 w-5"></i> é˜¿è˜‡ç”·å­©è™Ÿ (é«”é©—)</div>
                        <div class="font-bold bg-indigo-50 p-1 rounded"><i class="fas fa-chess-rook text-indigo-500 w-5"></i> ç†Šæœ¬åŸ (æ­·å²ååŸ)</div>
                    </div>
                    <a href="https://www.kkday.com/zh-tw/product/248950" target="_blank" class="block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg">å‰å¾€è¨‚è³¼</a>
                </div>
            </div>

        </div>

        <!-- SECTION 2: é€²éšè©³ç´°ç‰ˆæ¯”è¼ƒè¡¨ -->
        <div class="bg-teal-800 text-white p-4 rounded-t-xl shadow-lg text-center">
            <h2 class="text-xl font-bold"><i class="fas fa-table mr-2"></i>KKday è¡Œç¨‹ï¼æ·±åº¦æ±ºç­–åˆ†æ</h2>
            <p class="text-teal-200 text-sm">é«”åŠ›æ¶ˆè€—ã€é¤é£Ÿå…§å®¹ã€æ³¨æ„äº‹é …ä¸€è¦½</p>
        </div>

        <div class="bg-white border-x border-b border-gray-200 rounded-b-xl p-4 md:p-6 shadow-lg">
            
            <!-- Legend (åœ–ä¾‹) -->
            <div class="bg-gray-50 p-3 rounded-lg border border-gray-200 mb-6 text-sm flex flex-wrap gap-4 items-center justify-center">
                <span class="font-bold text-gray-900">æŒ‡æ¨™èªªæ˜ï¼š</span>
                <span class="flex items-center"><i class="fas fa-shoe-prints text-yellow-500 mr-1"></i> é«”åŠ›æ¶ˆè€—</span>
                <span class="flex items-center"><i class="fas fa-utensils text-green-500 mr-1"></i> é¤é£Ÿå…§å®¹</span>
                <span class="flex items-center"><i class="fas fa-clock text-blue-500 mr-1"></i> è»Šç¨‹é•·åº¦</span>
            </div>

            <!-- Mobile View (Expandable Cards) -->
            <div class="md:hidden space-y-4">
                
                <!-- Card 1 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden mobile-card border border-gray-100">
                    <div class="p-4 cursor-pointer" onclick="toggleDetail('m1')">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-yellow-600">1. å’Œç‰›åˆ’èˆ¹ç·š (287625)</h3>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="badge badge-blue">âœ… ä¿è­‰åˆ’èˆ¹</span>
                            <span class="badge badge-green">ğŸ¥© é«˜ç´šå’Œç‰›</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>é ‚ç´šäº«å—ãƒ»å…æ’éšŠ</span>
                            <i id="icon-m1" class="fas fa-chevron-down text-gray-400"></i>
                        </div>
                    </div>
                    <div id="detail-m1" class="hidden bg-gray-50 p-4 border-t border-gray-100 text-sm">
                        <ul class="space-y-2 mb-4">
                            <li><strong>ğŸ“ è·¯ç·šï¼š</strong>é˜¿è˜‡ç«å±± âœ é«˜åƒç©—å³½(æ·±åº¦) âœ åˆ’èˆ¹ã€‚</li>
                            <li><strong>ğŸ± é¤é£Ÿï¼š</strong><span class="text-pink-600 font-bold">é«˜ç´šï¼</span>é˜¿è˜‡ç‰›/é«˜åƒç©—ç‰›é™¶æ¿ç‡’ã€‚</li>
                            <li><strong>âš¡ é«”åŠ›ï¼š</strong>ä¸­ (å³½è°·æ­¥é“+é˜¿è˜‡æ•£æ­¥)ã€‚</li>
                            <li><strong>ğŸ’¡ é‡é»ï¼š</strong>å”¯ä¸€åŒ…å«ã€Œä»£è¨‚èˆ¹ç¥¨ã€èˆ‡ã€Œé«˜ç´šåˆé¤ã€çš„è¡Œç¨‹ã€‚</li>
                        </ul>
                        <a href="https://www.kkday.com/zh-tw/product/287625" target="_blank" class="block w-full text-center bg-yellow-500 text-white py-2 rounded-lg font-bold">å‰å¾€è¨‚è³¼</a>
                    </div>
                </div>

                <!-- Card 7: Deep Takachiho (New) -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden mobile-card border border-gray-100">
                    <div class="p-4 cursor-pointer" onclick="toggleDetail('m7')">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-purple-600">2. é«˜åƒç©—å°ç«è»Šç·š (181723)</h3>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="badge badge-indigo">ğŸš‚ å¤©ç©ºå°ç«è»Š</span>
                            <span class="badge badge-purple">â›©ï¸ æ·±åº¦ç¥è©±</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>æ­å°ç«è»Šãƒ»ä¸å»é˜¿è˜‡</span>
                            <i id="icon-m7" class="fas fa-chevron-down text-gray-400"></i>
                        </div>
                    </div>
                    <div id="detail-m7" class="hidden bg-gray-50 p-4 border-t border-gray-100 text-sm">
                        <ul class="space-y-2 mb-4">
                            <li><strong>ğŸ“ è·¯ç·šï¼š</strong>é«˜åƒç©—å³½ âœ å¤©å²©æˆ¶ç¥ç¤¾ âœ <strong>é«˜åƒç©—éµé“å°ç«è»Š</strong>ã€‚</li>
                            <li><strong>âš¡ é«”åŠ›ï¼š</strong>ä¸­ (å¤©å²©æˆ¶ç¥ç¤¾éœ€èµ°ä¸€æ®µ)ã€‚</li>
                            <li><strong>ğŸ± é¤é£Ÿï¼š</strong>è‡ªç†ã€‚</li>
                            <li><strong>ğŸ’¡ é‡é»ï¼š</strong>é©åˆæƒ³æ­ç«è»Šçœ‹é¢¨æ™¯ã€æ·±åº¦ç©é«˜åƒç©—çš„äººã€‚<strong>ä¸å»é˜¿è˜‡ç«å±±ã€‚</strong></li>
                        </ul>
                        <a href="https://www.kkday.com/zh-tw/product/181723" target="_blank" class="block w-full text-center bg-purple-600 text-white py-2 rounded-lg font-bold">å‰å¾€è¨‚è³¼</a>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden mobile-card border border-gray-100">
                    <div class="p-4 cursor-pointer" onclick="toggleDetail('m2')">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-teal-700">3. æº«æ³‰ç¥ç¤¾ç·š (150994)</h3>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="badge badge-blue">â™¨ï¸ é»‘å·æº«æ³‰</span>
                            <span class="badge badge-blue">â›©ï¸ è¢ç«ä¹‹æ£®</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>ç™‚ç™’æ°›åœãƒ»ä¸å»é«˜åƒç©—</span>
                            <i id="icon-m2" class="fas fa-chevron-down text-gray-400"></i>
                        </div>
                    </div>
                    <div id="detail-m2" class="hidden bg-gray-50 p-4 border-t border-gray-100 text-sm">
                        <ul class="space-y-2 mb-4">
                            <li><strong>ğŸ“ è·¯ç·šï¼š</strong>ä¸Šè‰²è¦‹ç†Šé‡åº§ç¥ç¤¾ âœ é˜¿è˜‡ âœ é»‘å·æº«æ³‰ã€‚</li>
                            <li><strong>ğŸ± é¤é£Ÿï¼š</strong>è‡ªç† (æ¨è–¦é»‘å·æº«æ³‰è¡—åƒç”œé»/é‡œé£¯)ã€‚</li>
                            <li><strong>âš¡ é«”åŠ›ï¼š</strong>ä¸­ (ä¸Šè‰²è¦‹ç¥ç¤¾éœ€çˆ¬200+éšæ¢¯)ã€‚</li>
                            <li><strong>ğŸ’¡ é‡é»ï¼š</strong>å”¯ä¸€å»é»‘å·æº«æ³‰çš„è¡Œç¨‹ï¼Œé©åˆå–œæ­¡æ—¥å¼è€è¡—æ°›åœè€…ã€‚</li>
                        </ul>
                        <a href="https://www.kkday.com/zh-tw/product/150994" target="_blank" class="block w-full text-center bg-teal-600 text-white py-2 rounded-lg font-bold">å‰å¾€è¨‚è³¼</a>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden mobile-card border border-gray-100">
                    <div class="p-4 cursor-pointer" onclick="toggleDetail('m3')">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-blue-600">4. ç¶“å…¸è§€å…‰ç·š (266452)</h3>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="badge badge-green">ğŸ’° CPå€¼é«˜</span>
                            <span class="badge badge-red">ğŸ£ åˆé¤è‡ªç†</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>æ¨™æº–è·¯ç·šãƒ»é ç®—é¦–é¸</span>
                            <i id="icon-m3" class="fas fa-chevron-down text-gray-400"></i>
                        </div>
                    </div>
                    <div id="detail-m3" class="hidden bg-gray-50 p-4 border-t border-gray-100 text-sm">
                        <ul class="space-y-2 mb-4">
                            <li><strong>ğŸ“ è·¯ç·šï¼š</strong>é˜¿è˜‡ç«å±± âœ é«˜åƒç©—å³½(æ·±åº¦)ã€‚</li>
                            <li><strong>ğŸ± é¤é£Ÿï¼š</strong>è‡ªç† (è¡Œç¨‹æœƒåœé é¤å»³æˆ–ä¼‘æ¯ç«™)ã€‚</li>
                            <li><strong>âš¡ é«”åŠ›ï¼š</strong>ä¸­ã€‚</li>
                            <li><strong>ğŸ’¡ é‡é»ï¼š</strong>åƒ¹æ ¼ä¾¿å®œï¼Œåˆ’èˆ¹éœ€è¦–ç¾å ´ç‹€æ³åŠ è³¼ã€‚</li>
                        </ul>
                        <a href="https://www.kkday.com/zh-tw/product/266452" target="_blank" class="block w-full text-center bg-blue-500 text-white py-2 rounded-lg font-bold">å‰å¾€è¨‚è³¼</a>
                    </div>
                </div>

                <!-- Card 4 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden mobile-card border border-gray-100">
                    <div class="p-4 cursor-pointer" onclick="toggleDetail('m4')">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-red-700">5. è²ªå¿ƒå…¨è¦½ç·š (285420)</h3>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="badge badge-yellow">âš¡ è¶•è¡Œç¨‹</span>
                            <span class="badge badge-blue">â›©ï¸ è¢ç«ä¹‹æ£®</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>ä¸‰å¤§æ™¯é»ä¸€æ¬¡æ»¿è¶³</span>
                            <i id="icon-m4" class="fas fa-chevron-down text-gray-400"></i>
                        </div>
                    </div>
                    <div id="detail-m4" class="hidden bg-gray-50 p-4 border-t border-gray-100 text-sm">
                        <ul class="space-y-2 mb-4">
                            <li><strong>ğŸ“ è·¯ç·šï¼š</strong>é˜¿è˜‡ âœ é«˜åƒç©—å³½ âœ ä¸Šè‰²è¦‹ç¥ç¤¾ã€‚</li>
                            <li><strong>âš¡ é«”åŠ›ï¼š</strong><span class="text-red-600 font-bold">é«˜</span>ã€‚ä¸€å¤©è·‘ä¸‰å€‹é»ï¼Œèµ°è·¯å¤šã€‚</li>
                            <li><strong>âš ï¸ æ³¨æ„ï¼š</strong>çµ•å°æ²’æ™‚é–“åˆ’èˆ¹ã€‚</li>
                            <li><strong>ğŸ’¡ é‡é»ï¼š</strong>é©åˆé«”åŠ›å¥½ã€æƒ³ä¸€å¤©æ‰“å¡å®Œæ‰€æœ‰é‡é»çš„äººã€‚</li>
                        </ul>
                        <a href="https://www.kkday.com/zh-tw/product/285420" target="_blank" class="block w-full text-center bg-red-600 text-white py-2 rounded-lg font-bold">å‰å¾€è¨‚è³¼</a>
                    </div>
                </div>

                <!-- Card 5 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden mobile-card border border-gray-100">
                    <div class="p-4 cursor-pointer" onclick="toggleDetail('m5')">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-indigo-700">6. éµé“ååŸç·š (248950)</h3>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <span class="badge badge-indigo">ğŸš‚ é˜¿è˜‡ç”·å­©</span>
                            <span class="badge badge-indigo">ğŸ¯ ç†Šæœ¬åŸ</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>æ­·å²èˆ‡éµé“è¿·é¦–é¸</span>
                            <i id="icon-m5" class="fas fa-chevron-down text-gray-400"></i>
                        </div>
                    </div>
                    <div id="detail-m5" class="hidden bg-gray-50 p-4 border-t border-gray-100 text-sm">
                        <ul class="space-y-2 mb-4">
                            <li><strong>ğŸ“ è·¯ç·šï¼š</strong>ç†Šæœ¬åŸ âœ é˜¿è˜‡ç«å±± âœ é˜¿è˜‡ç”·å­©è™Ÿ(é«”é©—)ã€‚</li>
                            <li><strong>âš¡ é«”åŠ›ï¼š</strong>ä¸­ (ç†Šæœ¬åŸå¾ˆå¤§éœ€è¦èµ°)ã€‚</li>
                            <li><strong>ğŸ± é¤é£Ÿï¼š</strong>è‡ªç†ã€‚</li>
                            <li><strong>ğŸ’¡ é‡é»ï¼š</strong>å”¯ä¸€å»ç†Šæœ¬åŸçš„è¡Œç¨‹ï¼Œå«ç‰¹è‰²åˆ—è»Šç¥¨ã€‚</li>
                        </ul>
                        <a href="https://www.kkday.com/zh-tw/product/248950" target="_blank" class="block w-full text-center bg-indigo-600 text-white py-2 rounded-lg font-bold">å‰å¾€è¨‚è³¼</a>
                    </div>
                </div>

            </div>

            <!-- Desktop View (Detailed Table) -->
            <div class="hidden md:block bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-gray-100 text-gray-600 text-sm uppercase tracking-wider border-b border-gray-200">
                            <th class="p-4 w-1/12 text-center">ä»£è™Ÿ</th>
                            <th class="p-4 w-2/12">è¡Œç¨‹åç¨±</th>
                            <th class="p-4 w-3/12">è©³ç´°æ™¯é» & è·¯ç·š</th>
                            <th class="p-4 w-1/12 text-center">é«”åŠ›</th>
                            <th class="p-4 w-2/12">é¤é£Ÿ & é«”é©—</th>
                            <th class="p-4 w-2/12">é—œéµæ³¨æ„äº‹é …</th>
                            <th class="p-4 w-1/12 text-center">é€£çµ</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100 text-sm text-gray-700">
                        
                        <!-- Row 1 -->
                        <tr class="detail-row hover:bg-yellow-50 transition">
                            <td class="p-4 text-center font-mono font-bold">287625</td>
                            <td class="p-4">
                                <div class="font-bold text-gray-900 text-base">å’Œç‰›åˆ’èˆ¹ç·š</div>
                                <div class="text-xs text-yellow-600 mt-1">é ‚ç´šäº«å—</div>
                            </td>
                            <td class="p-4">
                                <ul class="list-disc list-inside space-y-1">
                                    <li>é˜¿è˜‡ç«å±±/è‰åƒé‡Œ</li>
                                    <li><strong>é«˜åƒç©—å³½</strong> (æ·±åº¦éŠ)</li>
                                </ul>
                            </td>
                            <td class="p-4 text-center"><span class="badge badge-yellow">âš¡ ä¸­ç­‰</span></td>
                            <td class="p-4">
                                <div class="mb-1"><span class="badge badge-blue">âœ… ä¿è­‰åˆ’èˆ¹</span></div>
                                <div class="text-xs font-bold text-pink-600">ğŸ¥© é«˜ç´šå’Œç‰›åˆé¤</div>
                            </td>
                            <td class="p-4 text-xs text-gray-500">
                                å”¯ä¸€åŒ…å«ã€Œä»£è¨‚èˆ¹ç¥¨ã€æœå‹™ã€‚åƒ¹æ ¼æœ€é«˜ï¼Œä½†çœå»æ’éšŠéº»ç…©ã€‚
                            </td>
                            <td class="p-4 text-center">
                                <a href="https://www.kkday.com/zh-tw/product/287625" target="_blank" class="text-yellow-600 hover:text-yellow-800 font-bold underline">æŸ¥çœ‹</a>
                            </td>
                        </tr>

                        <!-- Row 7: Deep Takachiho (New) -->
                        <tr class="detail-row hover:bg-purple-50 transition">
                            <td class="p-4 text-center font-mono font-bold">181723</td>
                            <td class="p-4">
                                <div class="font-bold text-gray-900 text-base">é«˜åƒç©—æ·±åº¦ç·š</div>
                                <div class="text-xs text-purple-600 mt-1">å°ç«è»Šä¹‹æ—…</div>
                            </td>
                            <td class="p-4">
                                <ul class="list-disc list-inside space-y-1">
                                    <li><strong>é«˜åƒç©—å³½</strong> (æ·±åº¦éŠ)</li>
                                    <li><strong>å¤©ç©ºå°ç«è»Š</strong> (å¤©ç…§éµé“)</li>
                                    <li>å¤©å²©æˆ¶ç¥ç¤¾</li>
                                </ul>
                            </td>
                            <td class="p-4 text-center"><span class="badge badge-yellow">âš¡ ä¸­ç­‰</span></td>
                            <td class="p-4">
                                <div class="mb-1"><span class="badge badge-indigo">ğŸš‚ å¤©ç©ºå°ç«è»Š</span></div>
                                <div class="text-xs">ğŸ± è‡ªç†</div>
                            </td>
                            <td class="p-4 text-xs text-gray-500">
                                <span class="text-red-600 font-bold">ä¸å»é˜¿è˜‡ç«å±±ã€‚</span><br>å°ˆæ³¨æ–¼é«˜åƒç©—ç¥è©±èˆ‡éµé“é«”é©—ã€‚
                            </td>
                            <td class="p-4 text-center">
                                <a href="https://www.kkday.com/zh-tw/product/181723" target="_blank" class="text-purple-600 hover:text-purple-800 font-bold underline">æŸ¥çœ‹</a>
                            </td>
                        </tr>

                        <!-- Row 2 -->
                        <tr class="detail-row hover:bg-teal-50 transition">
                            <td class="p-4 text-center font-mono font-bold">150994</td>
                            <td class="p-4">
                                <div class="font-bold text-gray-900 text-base">æº«æ³‰ç¥ç¤¾ç·š</div>
                                <div class="text-xs text-teal-600 mt-1">ç™‚ç™’æ°›åœ</div>
                            </td>
                            <td class="p-4">
                                <ul class="list-disc list-inside space-y-1">
                                    <li><strong>ä¸Šè‰²è¦‹ç†Šé‡åº§ç¥ç¤¾</strong></li>
                                    <li><strong>é»‘å·æº«æ³‰</strong></li>
                                    <li>é˜¿è˜‡ç«å±±</li>
                                </ul>
                            </td>
                            <td class="p-4 text-center">
                                <span class="badge badge-yellow">âš¡ ä¸­ç­‰</span>
                                <div class="text-[10px] text-gray-400 mt-1">çˆ¬ç¥ç¤¾éšæ¢¯</div>
                            </td>
                            <td class="p-4">
                                <div class="mb-1"><span class="badge badge-red">âŒ ç„¡åˆ’èˆ¹</span></div>
                                <div class="text-xs">ğŸœ è‡ªç† (æº«æ³‰è¡—)</div>
                            </td>
                            <td class="p-4 text-xs text-gray-500">
                                å®Œå…¨ä¸å»é«˜åƒç©—å³½ã€‚é‡é»åœ¨æº«æ³‰æ°›åœèˆ‡ç¥ç¤¾æ‹ç…§ã€‚
                            </td>
                            <td class="p-4 text-center">
                                <a href="https://www.kkday.com/zh-tw/product/150994" target="_blank" class="text-teal-600 hover:text-teal-800 font-bold underline">æŸ¥çœ‹</a>
                            </td>
                        </tr>

                        <!-- Row 3 -->
                        <tr class="detail-row hover:bg-blue-50 transition">
                            <td class="p-4 text-center font-mono font-bold">266452</td>
                            <td class="p-4">
                                <div class="font-bold text-gray-900 text-base">ç¶“å…¸è§€å…‰ç·š</div>
                                <div class="text-xs text-blue-600 mt-1">å°è³‡é¦–é¸</div>
                            </td>
                            <td class="p-4">
                                <ul class="list-disc list-inside space-y-1">
                                    <li>é˜¿è˜‡ç«å±±/è‰åƒé‡Œ</li>
                                    <li><strong>é«˜åƒç©—å³½</strong> (æ·±åº¦éŠ)</li>
                                </ul>
                            </td>
                            <td class="p-4 text-center"><span class="badge badge-yellow">âš¡ ä¸­ç­‰</span></td>
                            <td class="p-4">
                                <div class="mb-1"><span class="badge badge-red">âš ï¸ åˆ’èˆ¹çœ‹é‹æ°£</span></div>
                                <div class="text-xs">ğŸ£ åˆé¤è‡ªç†</div>
                            </td>
                            <td class="p-4 text-xs text-gray-500">
                                åƒ¹æ ¼è¦ªæ°‘ã€‚åˆ’èˆ¹éœ€è¦–ç¾å ´ç‹€æ³åŠ è³¼ï¼Œä¸ä¿è­‰æœ‰ä½ã€‚
                            </td>
                            <td class="p-4 text-center">
                                <a href="https://www.kkday.com/zh-tw/product/266452" target="_blank" class="text-blue-600 hover:text-blue-800 font-bold underline">æŸ¥çœ‹</a>
                            </td>
                        </tr>

                        <!-- Row 4 -->
                        <tr class="detail-row hover:bg-red-50 transition">
                            <td class="p-4 text-center font-mono font-bold">285420</td>
                            <td class="p-4">
                                <div class="font-bold text-gray-900 text-base">è²ªå¿ƒå…¨è¦½ç·š</div>
                                <div class="text-xs text-red-600 mt-1">ä¸‰å¤§æ™¯é»</div>
                            </td>
                            <td class="p-4">
                                <ul class="list-disc list-inside space-y-1">
                                    <li>é˜¿è˜‡ç«å±±</li>
                                    <li>é«˜åƒç©—å³½ (çŸ­æš«)</li>
                                    <li><strong>ä¸Šè‰²è¦‹ç†Šé‡åº§ç¥ç¤¾</strong></li>
                                </ul>
                            </td>
                            <td class="p-4 text-center">
                                <span class="badge badge-red">ğŸ’¦ ç´¯</span>
                                <div class="text-[10px] text-gray-400 mt-1">èµ°è·¯å¤š</div>
                            </td>
                            <td class="p-4">
                                <div class="mb-1"><span class="badge badge-red">âŒ ç„¡æ³•åˆ’èˆ¹</span></div>
                                <div class="text-xs">ğŸ± åˆé¤è‡ªç†</div>
                            </td>
                            <td class="p-4 text-xs text-gray-500">
                                è¡Œç¨‹éå¸¸è¶•ï¼Œæ¯å€‹é»åœç•™æ™‚é–“çŸ­ã€‚é©åˆæƒ³ä¸€æ¬¡æ‰“å¡å®Œçš„äººã€‚
                            </td>
                            <td class="p-4 text-center">
                                <a href="https://www.kkday.com/zh-tw/product/285420" target="_blank" class="text-red-600 hover:text-red-800 font-bold underline">æŸ¥çœ‹</a>
                            </td>
                        </tr>

                         <!-- Row 5 -->
                         <tr class="detail-row hover:bg-indigo-50 transition">
                            <td class="p-4 text-center font-mono font-bold">248950</td>
                            <td class="p-4">
                                <div class="font-bold text-gray-900 text-base">éµé“ååŸç·š</div>
                                <div class="text-xs text-indigo-600 mt-1">éµé“è¿·</div>
                            </td>
                            <td class="p-4">
                                <ul class="list-disc list-inside space-y-1">
                                    <li><strong>ç†Šæœ¬åŸ</strong></li>
                                    <li>é˜¿è˜‡ç«å±±</li>
                                    <li>é˜¿è˜‡ç”·å­©è™Ÿ(é«”é©—)</li>
                                </ul>
                            </td>
                            <td class="p-4 text-center">
                                <span class="badge badge-yellow">âš¡ ä¸­ç­‰</span>
                                <div class="text-[10px] text-gray-400 mt-1">ç†Šæœ¬åŸç¯„åœå¤§</div>
                            </td>
                            <td class="p-4">
                                <div class="mb-1"><span class="badge badge-indigo">ğŸš‚ é˜¿è˜‡ç”·å­©è™Ÿ</span></div>
                                <div class="text-xs">ğŸ± è‡ªç†</div>
                            </td>
                            <td class="p-4 text-xs text-gray-500">
                                å”¯ä¸€åŒ…å«ç†Šæœ¬åŸçš„è¡Œç¨‹ã€‚æ‹‰è»Šè·é›¢è¼ƒé ã€‚
                            </td>
                            <td class="p-4 text-center">
                                <a href="https://www.kkday.com/zh-tw/product/248950" target="_blank" class="text-indigo-600 hover:text-indigo-800 font-bold underline">æŸ¥çœ‹</a>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
            
            <div class="mt-6 text-center text-gray-400 text-xs">
                è³‡æ–™ä¾†æºï¼šKKday å®˜ç¶²é é¢æ•´ç†ï¼Œå…§å®¹å¯èƒ½éš¨å­£ç¯€è®Šå‹•ï¼Œè«‹ä»¥è¨‚è³¼ç•¶ä¸‹è³‡è¨Šç‚ºæº–ã€‚
                <div class="mt-2 text-gray-500 font-bold">Ver 1.9 (Fix)</div>
            </div>

        </div>

        <div class="mt-8 text-center text-gray-500 text-sm">
            <p>â€» é‡‘é¡ç‚ºé ä¼°åƒè€ƒï¼Œå¯¦éš›åƒ¹æ ¼æœƒéš¨åŒ¯ç‡èˆ‡å­£ç¯€æ³¢å‹•ï¼Œè«‹ä¾ KKday å®˜ç¶²å³æ™‚è³‡è¨Šç‚ºä¸»ã€‚</p>
        </div>

    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-5 right-5 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-2xl transform translate-y-20 transition-transform duration-300 z-50 flex items-center">
        <i class="fas fa-check-circle text-green-400 mr-2"></i>
        <span>å·²ç‚ºæ‚¨ç¯©é¸ï¼</span>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, updateDoc, increment, setDoc, getDoc, collection, arrayUnion } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Poll Options Configuration - 6 items
        const pollOptions = [
            { id: '287625', name: 'å’Œç‰›åˆ’èˆ¹ç·š', color: 'bg-yellow-500' },
            { id: '181723', name: 'é«˜åƒç©—æ·±åº¦ç·š', color: 'bg-purple-600' },
            { id: '150994', name: 'æº«æ³‰ç¥ç¤¾ç·š', color: 'bg-teal-600' },
            { id: '266452', name: 'ç¶“å…¸è§€å…‰ç·š', color: 'bg-blue-600' },
            { id: '285420', name: 'è²ªå¿ƒå…¨è¦½ç·š', color: 'bg-red-600' },
            { id: '248950', name: 'éµé“ååŸç·š', color: 'bg-indigo-600' }
        ];

        let db, auth, appId;
        let isLocalMode = false;

        // 1. Initial Render (Show UI immediately)
        function renderInitialUI() {
             renderPoll({}); 
             document.getElementById('poll-logs').innerHTML = '<div class="text-center text-gray-400 py-4">è¼‰å…¥å³æ™‚å‹•æ…‹ä¸­...</div>';
        }

        // 2. Initialize System
        async function initSystem() {
            try {
                // User provided config
                const firebaseConfig = {
                    apiKey: "AIzaSyAGHMP1HLJJPRQD_9CXnwI6lQwkcbZNm8M",
                    authDomain: "fukuoka-tour-vote.firebaseapp.com",
                    projectId: "fukuoka-tour-vote",
                    storageBucket: "fukuoka-tour-vote.firebasestorage.app",
                    messagingSenderId: "997387578824",
                    appId: "1:997387578824:web:1006cda95b7fe7508d24fd"
                };

                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
                
                // Set a fixed ID for the voting data location
                appId = 'fukuoka-public-vote'; 

                // Auth Flow
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }

                // Wait for Auth
                await new Promise((resolve, reject) => {
                    const unsubscribe = onAuthStateChanged(auth, (user) => {
                        if (user) { unsubscribe(); resolve(user); }
                    }, (err) => reject(err));
                });

                // Listen to Real DB
                const pollRef = doc(db, 'artifacts', appId, 'public', 'data', 'poll_results', 'current');
                
                // Use onSnapshot immediately without blocking check
                onSnapshot(pollRef, (docSnap) => {
                    const data = docSnap.exists() ? docSnap.data() : {};
                    renderPoll(data);
                    renderLogs(data.logs || []);
                }, (error) => {
                    console.warn("Snapshot failed, falling back to local:", error);
                    initLocalMode();
                });

            } catch (error) {
                console.log("Firebase init failed or local mode requested:", error);
                initLocalMode();
            }
        }

        // 3. Local Mode Logic (Fallback)
        function initLocalMode() {
            isLocalMode = true;
            console.log("Running in Local Mode");
            
            // Show indicator safely using ID
            const titleContainer = document.getElementById('poll-title');
            if(titleContainer && !titleContainer.innerHTML.includes('å–®æ©Ÿ')) {
                 titleContainer.innerHTML += ' <span class="text-xs bg-white/20 px-2 py-1 rounded ml-2 border border-white/30">(å–®æ©Ÿç‰ˆ)</span>';
            }

            // Load data from localStorage
            loadLocalData();
        }

        function loadLocalData() {
            const localData = JSON.parse(localStorage.getItem('kkday_poll_data') || '{"logs": []}');
            renderPoll(localData);
            renderLogs(localData.logs || []);
        }

        // 4. Vote Handler
        window.vote = async (id) => {
            const nameInput = document.getElementById('voter-name');
            const name = nameInput.value.trim();

            if (!name) {
                alert('è«‹å…ˆè¼¸å…¥æ‚¨çš„æš±ç¨±ï¼Œæ‰èƒ½é€²è¡Œè¨˜åæŠ•ç¥¨å–”ï¼');
                nameInput.focus();
                return;
            }

            // Check local restriction
            if (localStorage.getItem(`voted_${id}_${name}`)) {
                alert(`${name} å·²ç¶“æŠ•éé€™å€‹è¡Œç¨‹å›‰ï¼`);
                return;
            }

            // Optimistic UI update trigger
            localStorage.setItem(`voted_${id}_${name}`, 'true');

            if (isLocalMode) {
                // Handle Local Vote
                const localData = JSON.parse(localStorage.getItem('kkday_poll_data') || '{"logs": []}');
                
                // Increment count
                localData['count_' + id] = (localData['count_' + id] || 0) + 1;
                
                // Add log
                if (!localData.logs) localData.logs = [];
                localData.logs.push({
                    name: name,
                    optionId: id,
                    timestamp: Date.now()
                });

                localStorage.setItem('kkday_poll_data', JSON.stringify(localData));
                loadLocalData(); // Re-render
                
            } else {
                // Handle Firebase Vote
                try {
                    const pollRef = doc(db, 'artifacts', appId, 'public', 'data', 'poll_results', 'current');
                    
                    // Create doc if needed logic is handled by setDoc with merge
                    await setDoc(pollRef, {
                        ['count_' + id]: increment(1),
                        logs: arrayUnion({
                            name: name,
                            optionId: id,
                            timestamp: Date.now()
                        })
                    }, { merge: true });
                } catch (e) {
                    console.error("Vote failed", e);
                    alert("é€£ç·šå¤±æ•—ï¼Œåˆ‡æ›ç‚ºå–®æ©Ÿæ¨¡å¼");
                    initLocalMode(); // Fallback on failure
                    
                    // Retry vote locally
                    const localData = JSON.parse(localStorage.getItem('kkday_poll_data') || '{"logs": []}');
                    localData['count_' + id] = (localData['count_' + id] || 0) + 1;
                    if (!localData.logs) localData.logs = [];
                    localData.logs.push({ name: name, optionId: id, timestamp: Date.now() });
                    localStorage.setItem('kkday_poll_data', JSON.stringify(localData));
                    loadLocalData();
                }
            }
        };

        // Render Functions
        function renderPoll(data) {
            const container = document.getElementById('poll-container');
            const totalDisplay = document.getElementById('total-votes');
            
            let totalVotes = 0;
            pollOptions.forEach(opt => {
                totalVotes += (data['count_' + opt.id] || 0);
            });
            
            if(totalDisplay) totalDisplay.innerText = totalVotes;

            let html = '';
            pollOptions.forEach(opt => {
                const count = data['count_' + opt.id] || 0;
                const percentage = totalVotes === 0 ? 0 : Math.round((count / totalVotes) * 100);
                const hasVoted = localStorage.getItem('voted_' + opt.id);
                
                // Safety check for width to avoid layout break
                const barWidth = percentage < 1 ? 1 : percentage; 

                html += `
                    <div class="mb-3">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-bold text-gray-700 text-sm">${opt.name}</span>
                            <span class="text-xs text-gray-500">${count} ç¥¨ (${percentage}%)</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="flex-grow poll-bar-container bg-gray-200 rounded-full h-4 overflow-hidden relative">
                                <div class="poll-bar ${opt.color} h-full transition-all duration-1000 ease-out" style="width: ${barWidth}%"></div>
                            </div>
                            <button onclick="vote('${opt.id}')" 
                                class="vote-btn px-3 py-1 rounded text-xs font-bold text-white ${opt.color} hover:brightness-110 transition shadow opacity-90 hover:opacity-100"
                                ${hasVoted ? 'disabled' : ''}>
                                ${hasVoted ? 'å·²æŠ•' : 'æŠ•ç¥¨'}
                            </button>
                        </div>
                    </div>
                `;
            });
            if(container) container.innerHTML = html;
        }

        function renderLogs(logs) {
            const logsContainer = document.getElementById('poll-logs');
            if (!logsContainer) return;
            
            if (!logs || logs.length === 0) {
                logsContainer.innerHTML = '<div class="text-center text-gray-400 py-4">æš«ç„¡ç´€éŒ„ï¼Œå¿«ä¾†æŠ•ç¬¬ä¸€ç¥¨ï¼</div>';
                return;
            }

            const recentLogs = logs.sort((a, b) => b.timestamp - a.timestamp).slice(0, 5);

            let html = '';
            recentLogs.forEach(log => {
                const option = pollOptions.find(o => o.id === log.optionId);
                const colorClass = option ? option.color.replace('bg-', 'text-') : 'text-gray-600';
                
                // Time formatting
                const now = Date.now();
                const diffMs = now - log.timestamp;
                const diffMins = Math.floor(diffMs / 60000);
                let timeText = 'å‰›å‰›';
                if (diffMins > 0) {
                    if (diffMins < 60) timeText = `${diffMins} åˆ†é˜å‰`;
                    else timeText = `${Math.floor(diffMins/60)} å°æ™‚å‰`;
                }

                // Sanitize input to prevent XSS (basic)
                const safeName = (log.name || 'åŒ¿å').replace(/</g, "&lt;").replace(/>/g, "&gt;");

                html += `
                    <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                        <div class="flex items-center">
                            <div class="w-2 h-2 rounded-full ${option ? option.color : 'bg-gray-400'} mr-2"></div>
                            <div>
                                <span class="font-bold text-gray-700 text-xs">${safeName}</span>
                                <span class="text-xs text-gray-400 transform scale-90 origin-left inline-block">æŠ•çµ¦äº†</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="font-bold text-xs ${colorClass}">${option ? option.name : 'æœªçŸ¥è¡Œç¨‹'}</span>
                            <div class="text-[10px] text-gray-400">${timeText}</div>
                        </div>
                    </div>
                `;
            });
            logsContainer.innerHTML = html;
        }

        // Highlighting Logic (Feature)
        function highlight(type) {
            resetStyles();
            
            // Map button types to card IDs
            const mapping = {
                'price': ['card-classic', 'card-all', 'card-deep'], 
                'food': 'card-food',
                'boat': 'card-food', 
                'onsen': 'card-onsen',
                'anime': ['card-onsen', 'card-deep'], 
                'train': ['card-train', 'card-deep'],
                'kids': [], 
            };

            const target = mapping[type];

            const cards = document.querySelectorAll('.tour-card');
            cards.forEach(c => {
                let shouldHighlight = false;
                if (Array.isArray(target)) {
                    if (target.includes(c.id)) shouldHighlight = true;
                } else if (c.id === target) {
                    shouldHighlight = true;
                }

                if (shouldHighlight) {
                    c.classList.add('card-highlight');
                } else {
                    c.classList.add('opacity-40');
                }
            });
        }

        function resetHighlight() {
            resetStyles();
        }

        function resetStyles() {
            const cards = document.querySelectorAll('.tour-card');
            cards.forEach(card => {
                card.classList.remove('card-highlight', 'opacity-40');
                card.classList.add('opacity-100');
            });
        }

        // Start
        renderInitialUI();
        initSystem();
    </script>
</body>
</html>
